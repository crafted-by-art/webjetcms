CKEDITOR.plugins.add("quicktable",{requires:"table,panelbutton,floatpanel",lang:"af,ar,bg,bn,bs,ca,cs,cy,da,de,el,en,en-au,en-ca,en-gb,eo,es,et,eu,fa,fi,fo,fr,fr-ca,gl,gu,he,hi,hr,hu,id,is,it,ja,ka,km,ko,ku,lt,lv,mk,mn,ms,nb,nl,no,pl,pt,pt-br,ro,ru,si,sk,sl,sq,sr,sr-latn,sv,th,tr,ug,uk,vi,zh,zh-cn",afterInit:function(d){var n,p;function l(h){return new CKEDITOR.dom.element(h,d.document)}function q(h,b){for(var c=l("table"),a=c.append(l("thead")),e=c.append(l("tbody")),f=0;f<h;f++){var g=e;0==f&&(g=
a);for(var g=g.append(l("tr")),r=0;r<b;r++)g.append(l(0==f?"th":"td")).appendBogus()}c.setAttribute("border",w);t&&c.setAttribute("style",t);c.setStyle("width",x);c.addClass("tabulkaStandard");d.insertElement(c);"undefined"!=typeof window.bootstrapVersion&&0!=window.bootstrapVersion.indexOf("3")&&(c.removeClass("tabulkaStandard"),c.addClass("table"),c.addClass("table-sm"),c.addClass("tabulkaStandard"),$(c.$).wrap('\x3cdiv class\x3d"table-responsive"\x3e\x3c/table\x3e'))}function y(d){var b=[],c=CKEDITOR.tools.addFunction(function(a,
c){q(parseInt(a,10)+1,parseInt(c,10)+1);d.hide()});b.push('\x3ca style\x3d"display:block" _cke_focus\x3d1 hidefocus\x3dtrue href\x3d"javascript:void(1)"\x3e\x3ctable role\x3d"presentation" cellspacing\x3d0 cellpadding\x3d0 style\x3d"width: 154px; margin: 0 auto 3px;table-layout:fixed;border-collapse:collapse;border: 1px solid #aaa"\x3e');for(var a=0;a<u;a++){b.push("\x3ctr\x3e");for(var e=0;e<v;e++)b.push('\x3ctd style\x3d"border: 1px solid #aaa;width:14px;height:14px;" data-i\x3d"'+a+'" data-j\x3d"'+
e+'" onclick\x3d"CKEDITOR.tools.callFunction(',c,",'",a,"','",e,"'); return false;\"\x3e\x3c/td\x3e");b.push("\x3c/tr\x3e")}b.push("\x3c/table\x3e\x3c/a\x3e");return b.join("")}function m(h,b,c,a){b=b.$.tBodies[0].rows;for(var e=0;e<b.length;e++)for(var f=b[e].cells,g=0;g<f.length;g++)f[g].style.background=e<c&&g<a?"#E5E5E5":"";n=c-1;p=a-1;h.setText(c+" × "+a+" "+d.lang.table.toolbar)}var u=d.config.quickTableRows||8,v=d.config.quickTableColumns||10,w=d.config.quickTableBorder||"1",t=d.config.quickTableStyle||
null,x=d.config.quickTableWidth||"100%";p=n=-1;d.ui.add("Table",CKEDITOR.UI_PANELBUTTON,{label:d.lang.table.toolbar,command:"table",modes:{wysiwyg:1},editorFocus:0,toolbar:"insert,30",caption:null,table:null,panel:{css:CKEDITOR.skin.getPath("editor"),attributes:{role:"listbox","aria-label":d.lang.table.toolbar}},onBlock:function(h,b){b.autoSize=!0;b.element.addClass("cke_colorblock");var c=new CKEDITOR.dom.element("div");c.setStyles({"text-align":"center",margin:"3px 0"});b.element.append(c);this.caption=
c;var a=CKEDITOR.dom.element.createFromHtml(y(h)),e=a.getFirst();e.on("mouseleave",function(a){m(c,e,1,1)});e.on("mousemove",function(a){var b=a.data.getTarget();"td"==b.getName()&&(a=parseInt(b.getAttribute("data-i"),10),b=parseInt(b.getAttribute("data-j"),10),m(c,e,a+1,b+1))});a.on("keydown",function(a){var b=a.data.getKeystroke(),f=n,k=p;switch(b){case 37:k--;break;case 39:k++;break;case 40:f++;break;case 38:f--;break;case 13:case 32:q(f+1,k+1);return;default:return}0>f||0>k?h.hide():((f>u-1||
k>v-1)&&d.execCommand("table"),m(c,e,f+1,k+1),a.data.preventDefault(),a.data.stopPropagation())});b.element.append(a);this.table=e;a=new CKEDITOR.dom.element("a");a.setAttributes({_cke_focus:1,hidefocus:!0,title:d.lang.quicktable.more,href:'javascript:void("'+d.lang.quicktable.more+'")',role:"option"});a.addClass("cke_colormore");a.setText(d.lang.quicktable.more);a.setStyle("text-align","center");a.on("click",function(a){d.execCommand("table");a.data.preventDefault()});b.element.append(a);CKEDITOR.ui.fire("ready",
this);var a=b.keys,f="rtl"==d.lang.dir;a[f?37:39]="next";a[40]="next";a[9]="next";a[f?39:37]="prev";a[38]="prev";a[CKEDITOR.SHIFT+9]="prev";a[32]="click"},onOpen:function(){m(this.caption,this.table,1,1)}})}});