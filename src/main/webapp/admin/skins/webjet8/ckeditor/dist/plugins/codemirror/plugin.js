(function(){CKEDITOR.plugins.add("codemirror",{lang:"af,ar,bg,bn,bs,ca,cs,cy,da,de,el,en-au,en-ca,en-gb,en,eo,es,et,eu,fa,fi,fo,fr-ca,fr,gl,gu,he,hi,hr,hu,is,it,ja,ka,km,ko,ku,lt,lv,mk,mn,ms,nb,nl,no,pl,pt-br,pt,ro,ru,sk,sl,sr-latn,sr,sv,th,tr,ug,uk,vi,zh-cn,zh",version:"1.18.7",init:function(b){function k(){var a=["core","addons"];switch(c.mode){case "bbcode":case "bbcodemixed":a.push("modeHtml");break;case "application/x-httpd-php":a.push("modePHP");break;case "text/javascript":a.push("modeJs");
break;case "handlebars":a.push("modeHandlebars");break;case "twig":a.push("modeTwig");break;default:a.push("modeHtml")}c.useBeautifyOnStart&&a.push("beautifyModule");c.enableSearchTools&&a.push("addonSearch");return a}function p(){var a=[e+"js/codemirror.addons.min.js"];switch(c.mode){case "handlebars":a.push(e+"js/codemirror.mode.handlebars.min.js");case "bbcode":a.push(e+"js/codemirror.mode.bbcode.min.js");break;case "bbcodemixed":a.push(e+"js/codemirror.mode.bbcodemixed.min.js");break;case "htmlmixed":a.push(e+
"js/codemirror.mode.htmlmixed.min.js");break;case "text/html":a.push(e+"js/codemirror.mode.htmlmixed.min.js");break;case "application/x-httpd-php":a.push(e+"js/codemirror.mode.php.min.js");break;case "text/javascript":a.push(e+"js/codemirror.mode.javascript.min.js");break;case "twig":a.push(e+"js/codemirror.mode.twig.min.js");break;case "twig":a.push(e+"js/codemirror.mode.twig.min.js");break;case "text/x-mssql":case "text/x-mysql":case "text/x-pgsql":case "text/x-sql":a.push(e+"js/codemirror.mode.sql.min.js");
break;default:a.push(e+"js/codemirror.mode.htmlmixed.min.js")}c.useBeautifyOnStart&&a.push(e+"js/beautify.min.js");c.enableSearchTools&&a.push(e+"js/codemirror.addons.search.min.js");return a}function n(a){function b(a){for(var c=[[CKEDITOR.SHIFT,"Shift-"],[CKEDITOR.CTRL,"Ctrl-"],[CKEDITOR.ALT,"Alt-"]],d="",f=0;f<c.length;f++)a&c[f][0]&&(a-=c[f][0],d+=c[f][1]);return CodeMirror.keyNames[a]?d+CodeMirror.keyNames[a]:null}var h=a.ui.space("contents").getDocument().createElement("textarea");h.setStyles(CKEDITOR.tools.extend({width:CKEDITOR.env.ie7Compat?
"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"},CKEDITOR.tools.cssVendorPrefix("tab-size",a.config.sourceAreaTabSize||4)));var e=[a.lang.editor,a.name].join();h.setAttributes({dir:"ltr",tabIndex:CKEDITOR.env.webkit?-1:a.tabIndex,role:"textbox","aria-label":e});h.addClass("cke_source");h.addClass("cke_reset");h.addClass("cke_enable_context_menu");a.ui.space("contents").append(h);window["editable_"+a.id]=a.editable(new d(a,h));window["editable_"+a.id].setData(a.getData(1));
window["editable_"+a.id].editorID=a.id;a.fire("ariaWidget",this);h=window["editable_"+a.id];e=h.getParent();c.lineNumbers&&c.enableCodeFolding&&(window["foldFunc_"+a.id]=CodeMirror.newFoldFunction(CodeMirror.tagRangeFinder));(function(c){var g=a.keystrokeHandler.keystrokes,d;for(d in g){var f=b(d);null!==f&&"Enter"!==f&&"Ctrl-B"!==f&&"Ctrl-I"!==f&&"Ctrl-U"!==f&&"Ctrl-Y"!==f&&"Ctrl-Z"!==f&&"Ctrl-C"!==f&&"Ctrl-V"!==f&&function(b){c[f]=function(){a.execCommand(b)}}(g[d])}})(c.extraKeys);var k=c.mode;
"handlebars"==k?k={name:"handlebars",base:"text/html"}:"twig"==c.mode&&(k={name:"twig",base:"text/html"});window["codemirror_"+a.id]=CodeMirror.fromTextArea(h.$,{direction:a.lang.dir,mode:k,matchBrackets:c.matchBrackets,maxHighlightLineLength:c.maxHighlightLineLength,matchTags:c.matchTags,workDelay:300,workTime:35,readOnly:a.readOnly,lineNumbers:c.lineNumbers,lineWrapping:!0,autoCloseTags:c.autoCloseTags,autoCloseBrackets:c.autoCloseBrackets,highlightSelectionMatches:c.highlightMatches,continueComments:c.continueComments,
indentWithTabs:c.indentWithTabs,theme:c.theme,showTrailingSpace:c.showTrailingSpace,showCursorWhenSelecting:!0,hintOptions:c.hintOptions,styleActiveLine:c.styleActiveLine,extraKeys:c.extraKeys,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]});window["codemirror_"+a.id].display.wrapper.classList.add("cke_enable_context_menu");h=0==e.$.clientHeight?a.ui.space("contents").getStyle("height"):e.$.clientHeight+"px";window["codemirror_"+a.id].config=c;c.autoFormatOnStart&&(c.useBeautifyOnStart?
(e=window["codemirror_"+a.id].getValue(),window["codemirror_"+a.id].setValue(html_beautify(e,4," ",120,"collapse"))):window["codemirror_"+a.id].autoFormatAll({line:0,ch:0},{line:window["codemirror_"+a.id].lineCount(),ch:0}));window["codemirror_"+a.id].on("change",function(){window["codemirror_"+a.id].save();a.fire("change",this)});window["codemirror_"+a.id].setSize(null,h);if(c.lineNumbers&&c.enableCodeFolding)window["codemirror_"+a.id].on("gutterClick",window["foldFunc_"+a.id]);if("function"===typeof c.onLoad)c.onLoad(window["codemirror_"+
a.id],a);window["codemirror_"+a.id].on("blur",function(){a.fire("blur",this)});window["codemirror_"+a.id].on("keypress",function(b,g){if(c.enableCodeFormatting){var d=window["codemirror_"+a.id].getCursor(!0),f=window["codemirror_"+a.id].getCursor(!1);"keydown"!==g.type||!g.ctrlKey||75!==g.keyCode||g.shiftKey||g.altKey?"keydown"===g.type&&g.ctrlKey&&75===g.keyCode&&g.shiftKey&&!g.altKey?(window["codemirror_"+a.id].commentRange(!1,d,f),c.autoFormatOnUncomment&&window["codemirror_"+a.id].autoFormatRange(d,
f)):"keydown"===g.type&&g.ctrlKey&&75===g.keyCode&&!g.shiftKey&&g.altKey&&window["codemirror_"+a.id].autoFormatRange(d,f):window["codemirror_"+a.id].commentRange(!0,d,f)}})}b.addCommand("codemirrorAbout",new CKEDITOR.dialogCommand("codemirrorAboutDialog")).modes={wysiwyg:1,source:1};CKEDITOR.dialog.add("codemirrorAboutDialog",this.path+"dialogs/codemirrorAbout.js");var e=this.path,c=CKEDITOR.tools.extend({autoCloseBrackets:!0,autoCloseTags:!0,autoFormatOnStart:!1,autoFormatOnUncomment:!1,autoLoadCodeMirror:!0,
continueComments:!0,enableCodeFolding:!0,enableCodeFormatting:!0,enableSearchTools:!0,highlightMatches:!0,indentWithTabs:!1,lineNumbers:!0,lineWrapping:!0,mode:"htmlmixed",matchBrackets:!0,maxHighlightLineLength:1E3,matchTags:!0,showAutoCompleteButton:!0,showCommentButton:!0,showFormatButton:!0,showSearchButton:!0,showTrailingSpace:!0,showUncommentButton:!0,styleActiveLine:!0,theme:"default",useBeautifyOnStart:!1,hintOptions:null,extraKeys:{"Ctrl-Space":"autocomplete","Ctrl-Q":function(a){if(c.enableCodeFolding)window["foldFunc_"+
b.id](a,a.getCursor().line)}}},b.config.codemirror||{},!0),m=b.lang.codemirror;b.config.codemirror_theme&&(c.theme=b.config.codemirror_theme);b.config.codemirror_autoFormatOnStart&&(c.autoFormatOnStart=b.config.codemirror_autoFormatOnStart);b.plugins.bbcode&&0>=c.mode.indexOf("bbcode")&&(c.mode="bbcode");var r="function"===typeof require&&"function"===typeof require.config,t;if(r){var q=c.requireContext||"_",l=CKEDITOR.getUrl(CKEDITOR.plugins.getPath("codemirror")+"js/"),l=l.substring(0,l.length-
1);t=require.config({context:q,packages:[{name:"codemirror",location:l,main:"codemirror.min.js"},{name:"codemirror-mode-handlebars",location:l,main:"codemirror.mode.handlebars.min.js"},{name:"codemirror-mode-twig",location:l,main:"codemirror.mode.twig.min.js"},{name:"codemirror-mode-html",location:l,main:"codemirror.mode.htmlmixed.min.js"},{name:"codemirror-mode-php",location:l,main:"codemirror.mode.php.min.js"},{name:"codemirror-mode-js",location:l,main:"codemirror.mode.js.min.js"},{name:"codemirror-addons",
location:l,main:"codemirror.addons.min.js"},{name:"codemirror-addon-search",location:l,main:"codemirror.addons.search.min.js"},{name:"codemirror-beautify",location:l,main:"beautify.min.js"}],bundles:{codemirror:["core","codemirror.js"],"codemirror-mode-handlebars":["modeHandlebars"],"codemirror-mode-twig":["modeTwig"],"codemirror-mode-html":["modeHtml"],"codemirror-mode-php":["modePHP"],"codemirror-mode-js":["modeJS"],"codemirror-addons":["addons"],"codemirror-addon-search":["addonSearch"],"codemirror-beautify":["beautifyModule"]},
map:{"*":{"lib/codemirror":"codemirror.js"}}})}(b.elementMode===CKEDITOR.ELEMENT_MODE_INLINE||b.plugins.sourcedialog)&&CKEDITOR.dialog.add("sourcedialog",function(a){function b(a,d,e){var f=e.getSize();e=f.width;var f=f.height/1.5,h=c.mode;"handlebars"==h?h={name:"handlebars",base:"text/html"}:"twig"==h&&(h={name:"twig",base:"text/html"});window["codemirror_"+a.id]=CodeMirror.fromTextArea(d,{direction:a.lang.dir,mode:h,matchBrackets:c.matchBrackets,maxHighlightLineLength:c.maxHighlightLineLength,
matchTags:c.matchTags,workDelay:300,workTime:35,readOnly:a.readOnly,lineNumbers:c.lineNumbers,lineWrapping:c.lineWrapping,autoCloseTags:c.autoCloseTags,autoCloseBrackets:c.autoCloseBrackets,highlightSelectionMatches:c.highlightMatches,continueComments:c.continueComments,indentWithTabs:c.indentWithTabs,theme:c.theme,showTrailingSpace:c.showTrailingSpace,showCursorWhenSelecting:!0,styleActiveLine:c.styleActiveLine,hintOptions:c.hintOptions,viewportMargin:Infinity,extraKeys:c.extraKeys,foldGutter:!0,
gutters:["CodeMirror-linenumbbers","CodeMirror-foldgutter"]});window["codemirror_"+a.id].display.wrapper.classList.add("cke_enable_context_menu");d=f+"px";e+="px";window["codemirror_"+a.id].config=c;c.autoFormatOnStart&&(c.useBeautifyOnStart?(f=window["codemirror_"+a.id].getValue(),window["codemirror_"+a.id].setValue(html_beautify(f,4," ",120,"collapse"))):window["codemirror_"+a.id].autoFormatAll({line:0,ch:0},{line:window["codemirror_"+a.id].lineCount(),ch:0}));window["codemirror_"+a.id].on("change",
function(){window["codemirror_"+a.id].save();a.fire("change",this)});window["codemirror_"+a.id].setSize(e,d);if(c.lineNumbers&&c.enableCodeFolding)window["codemirror_"+a.id].on("gutterClick",window["foldFunc_"+a.id]);if("function"===typeof c.onLoad)c.onLoad(window["codemirror_"+a.id],a);window["codemirror_"+a.id].on("blur",function(){a.fire("blur",this)});window["codemirror_"+a.id].on("keypress",function(b,d){if(c.enableCodeFormatting){var e=window["codemirror_"+a.id].getCursor(!0),g=window["codemirror_"+
a.id].getCursor(!1);"keydown"!==d.type||!d.ctrlKey||75!==d.keyCode||d.shiftKey||d.altKey?"keydown"===d.type&&d.ctrlKey&&75===d.keyCode&&d.shiftKey&&!d.altKey?(window["codemirror_"+a.id].commentRange(!1,e,g),c.autoFormatOnUncomment&&window["codemirror_"+a.id].autoFormatRange(e,g)):"keydown"===d.type&&d.ctrlKey&&75===d.keyCode&&!d.shiftKey&&d.altKey&&window["codemirror_"+a.id].autoFormatRange(e,g):window["codemirror_"+a.id].commentRange(!0,e,g)}});a.plugins.textselection&&textRange&&!a.config.fullPage&&
(d=OffSetToLineChannel(window["codemirror_"+a.id],textRange.startOffset),"undefined"==typeof textRange.endOffset?(window["codemirror_"+a.id].focus(),window["codemirror_"+a.id].setCursor(d)):(window["codemirror_"+a.id].focus(),e=OffSetToLineChannel(window["codemirror_"+a.id],textRange.endOffset),window["codemirror_"+a.id].setSelection(d,e)))}var d=CKEDITOR.document.getWindow().getViewPaneSize(),l=Math.min(d.width-70,800),d=d.height/1.5,n;return{title:a.lang.sourcedialog.title,minWidth:l,minHeight:d,
resizable:CKEDITOR.DIALOG_RESIZE_BOTH,onLoad:function(){this.on("resize",function(b){var c=b.sender.parts;window["codemirror_"+a.id].setSize(b.data.width+"px",b.data.height-c.title.$.offsetHeight-c.footer.$.offsetHeight+"px")},this)},onShow:function(d){this.getContentElement("main","data").focus();this.getContentElement("main","AutoComplete").setValue(c.autoCloseTags,!0);var g=this.getContentElement("main","data").getInputElement().$;if(a.plugins.textselection){a._.previousModeData=a.getData();if(a.getData()){if(CKEDITOR.env.gecko&&
!a.focusManager.hasFocus)return;var h=a.getSelection(),f;h&&(f=h.getRanges()[0])&&(wysiwygBookmark=f.createBookmark(a))}"wysiwyg"===a.mode&&wysiwygBookmark&&(textRange=new CKEDITOR.dom.textRange(a.getData()),textRange.moveToBookmark(wysiwygBookmark,a),a.setData(textRange.content))}this.setValueOf("main","data",n=a.getData());c.autoLoadCodeMirror&&(IsStyleSheetAlreadyLoaded(e+"css/codemirror.min.css")||CKEDITOR.document.appendStyleSheet(e+"css/codemirror.min.css"),c.theme.length&&"default"!=c.theme&&
!IsStyleSheetAlreadyLoaded(e+"theme/"+c.theme+".css")&&CKEDITOR.document.appendStyleSheet(e+"theme/"+c.theme+".css"),r?t(k(),function(c,e){b(a,g,d.sender)}):"undefined"==typeof CodeMirror?CKEDITOR.scriptLoader.load(e+"js/codemirror.min.js",function(){CKEDITOR.scriptLoader.load(p(),function(){b(a,g,d.sender)})}):CodeMirror.prototype.autoFormatAll?b(a,g,d.sender):CKEDITOR.scriptLoader.load(p(),function(){b(a,g,d.sender)}))},onCancel:function(b){b.data.hide&&(window["codemirror_"+a.id].toTextArea(),
window["codemirror_"+a.id]=null,a.fire("blur",this),a.fire("focus",this))},onOk:function(){function b(c){var d=this;a.setData(c,function(){d.hide();var b=a.createRange();b.moveToElementEditStart(a.editable());b.select()})}return function(){window["codemirror_"+a.id].toTextArea();window["codemirror_"+a.id]=null;var c=this.getValueOf("main","data").replace(/\r/g,"");if(c===n)return a.fire("blur",this),a.fire("focus",this),!0;CKEDITOR.env.ie?CKEDITOR.tools.setTimeout(b,0,this,c):b.call(this,c);a.fire("blur",
this);a.fire("focus",this);return!1}}(),contents:[{id:"main",label:a.lang.sourcedialog.title,elements:[{type:"hbox",style:"width: 80px;margin:0;",widths:["20px","20px","20px","20px"],children:[{type:"button",id:"searchCode",label:"",title:m.searchCode,"class":"searchCodeButton cke_button_icon",onClick:function(){CodeMirror.commands.find(window["codemirror_"+a.id])}},{type:"button",id:"replaceCode",label:"",title:m.replaceCode,"class":"replaceCodeButton",onClick:function(){CodeMirror.commands.replace(window["codemirror_"+
a.id])}},{type:"button",id:"autoFormat",label:"",title:m.autoFormat,"class":"autoFormat",onClick:function(){var b=window["codemirror_"+a.id].getCursor(!0),c=window["codemirror_"+a.id].getCursor(!1);window["codemirror_"+a.id].autoFormatRange(b,c)}},{type:"button",id:"CommentSelectedRange",label:"",title:m.commentSelectedRange,"class":"CommentSelectedRange",onClick:function(){var b=window["codemirror_"+a.id].getCursor(!0),c=window["codemirror_"+a.id].getCursor(!1);window["codemirror_"+a.id].commentRange(!0,
b,c)}},{type:"button",id:"UncommentSelectedRange",label:"",title:m.uncommentSelectedRange,"class":"UncommentSelectedRange",onClick:function(){var b=window["codemirror_"+a.id].getCursor(!0),c=window["codemirror_"+a.id].getCursor(!1);window["codemirror_"+a.id].commentRange(!1,b,c);window["codemirror_"+a.id].config.autoFormatOnUncomment&&window["codemirror_"+a.id].autoFormatRange(b,c)}},{type:"button",id:"codemirrorAbout",label:"",title:m.dlgTitle,"class":"codemirrorAbout",onClick:function(){a.execCommand("codemirrorAbout")}}]},
{type:"checkbox",id:"AutoComplete",label:m.autoCompleteToggle,title:m.autoCompleteToggle,onChange:function(){window["codemirror_"+a.id].setOption("autoCloseTags",this.getValue())}},{type:"textarea",id:"data",dir:"ltr",inputStyle:"cursor:auto;width:"+l+"px;height:"+d+"px;tab-size:4;text-align:left;","class":"cke_source cke_enable_context_menu"}]}]}});b.commands.find&&(b.commands.find.modes={wysiwyg:1,source:1},b.commands.find.exec=function(){"wysiwyg"===b.mode?b.openDialog("find"):CodeMirror.commands.find(window["codemirror_"+
b.id])});b.commands.replace&&(b.commands.replace.modes={wysiwyg:1,source:1},b.commands.replace.exec=function(){"wysiwyg"===b.mode?b.openDialog("find",function(){this.selectPage("replace")}):CodeMirror.commands.replace(window["codemirror_"+b.id])});q=CKEDITOR.plugins.sourcearea;q.commands.searchCode||(CKEDITOR.plugins.sourcearea.commands={source:{modes:{wysiwyg:1,source:1},editorFocus:!1,readOnly:1,exec:function(a){"wysiwyg"===a.mode&&a.fire("saveSnapshot");a.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED);
a.setMode("source"===a.mode?"wysiwyg":"source")},canUndo:!1},searchCode:{modes:{wysiwyg:0,source:1},editorFocus:!1,readOnly:1,exec:function(a){CodeMirror.commands.find(window["codemirror_"+a.id])},canUndo:!0},autoFormat:{modes:{wysiwyg:0,source:1},editorFocus:!1,readOnly:1,exec:function(a){var b=window["codemirror_"+a.id].getCursor(!0),c=window["codemirror_"+a.id].getCursor(!1);window["codemirror_"+a.id].autoFormatRange(b,c)},canUndo:!0},commentSelectedRange:{modes:{wysiwyg:0,source:1},editorFocus:!1,
readOnly:1,exec:function(a){var b=window["codemirror_"+a.id].getCursor(!0),c=window["codemirror_"+a.id].getCursor(!1);window["codemirror_"+a.id].commentRange(!0,b,c)},canUndo:!0},uncommentSelectedRange:{modes:{wysiwyg:0,source:1},editorFocus:!1,readOnly:1,exec:function(a){var b=window["codemirror_"+a.id].getCursor(!0),c=window["codemirror_"+a.id].getCursor(!1);window["codemirror_"+a.id].commentRange(!1,b,c);window["codemirror_"+a.id].config.autoFormatOnUncomment&&window["codemirror_"+a.id].autoFormatRange(b,
c)},canUndo:!0},autoCompleteToggle:{modes:{wysiwyg:0,source:1},editorFocus:!1,readOnly:1,exec:function(a){this.state==CKEDITOR.TRISTATE_ON?window["codemirror_"+a.id].setOption("autoCloseTags",!1):this.state==CKEDITOR.TRISTATE_OFF&&window["codemirror_"+a.id].setOption("autoCloseTags",!0);this.toggleState()},canUndo:!0}});b.addMode("source",function(a){c.autoLoadCodeMirror&&null!==b.ui.space("contents")&&(IsStyleSheetAlreadyLoaded(e+"css/codemirror.min.css")||CKEDITOR.document.appendStyleSheet(e+"css/codemirror.min.css"),
c.theme.length&&"default"!=c.theme&&!IsStyleSheetAlreadyLoaded(e+"theme/"+c.theme+".css")&&CKEDITOR.document.appendStyleSheet(e+"theme/"+c.theme+".css"),r?t(k(),function(){n(b);a()}):"undefined"==typeof CodeMirror?CKEDITOR.scriptLoader.load(e+"js/codemirror.min.js",function(){CKEDITOR.scriptLoader.load(p(),function(){n(b);a()})}):CodeMirror.prototype.autoFormatAll?(n(b),a()):CKEDITOR.scriptLoader.load(p(),function(){n(b);a()}))});b.addCommand("source",q.commands.source);b.ui.addButton&&null!=b.ui.space("contents")&&
b.ui.addButton("Source",{label:b.lang.codemirror.toolbar,command:"source",toolbar:"mode,10"});c.enableCodeFormatting&&(b.addCommand("searchCode",q.commands.searchCode),b.addCommand("autoFormat",q.commands.autoFormat),b.addCommand("commentSelectedRange",q.commands.commentSelectedRange),b.addCommand("uncommentSelectedRange",q.commands.uncommentSelectedRange),b.addCommand("autoCompleteToggle",q.commands.autoCompleteToggle),b.ui.addButton&&((c.showFormatButton||c.showCommentButton||c.showUncommentButton||
c.showSearchButton)&&b.ui.add("-",CKEDITOR.UI_SEPARATOR,{toolbar:"mode,30"}),c.showFormatButton&&b.ui.addButton("autoFormat",{icon:this.path+"images/autoformat.svg",label:m.autoFormat,command:"autoFormat",toolbar:"mode,50"}),c.showCommentButton&&b.ui.addButton("CommentSelectedRange",{icon:this.path+"images/commentselectedrange.svg",label:m.commentSelectedRange,command:"commentSelectedRange",toolbar:"mode,60"}),c.showUncommentButton&&b.ui.addButton("UncommentSelectedRange",{icon:this.path+"images/uncommentselectedrange.svg",
label:m.uncommentSelectedRange,command:"uncommentSelectedRange",toolbar:"mode,70"}),c.showAutoCompleteButton&&b.ui.addButton("AutoComplete",{icon:this.path+"images/autocomplete.svg",label:m.autoCompleteToggle,command:"autoCompleteToggle",toolbar:"mode,80"}),b.ui.addButton("codemirrorAbout",{icon:this.path+"images/codemirror.svg",label:m.dlgTitle,command:"codemirrorAbout",toolbar:"mode,90"})));b.on("beforeModeUnload",function(a){if("source"===b.mode&&b.plugins.textselection&&!b.config.fullPage){var c=
b.getTextSelection();c.startOffset=LineChannelToOffSet(window["codemirror_"+b.id],window["codemirror_"+b.id].getCursor(!0));c.endOffset=LineChannelToOffSet(window["codemirror_"+b.id],window["codemirror_"+b.id].getCursor(!1));delete c.element;c.createBookmark(b);sourceBookmark=!0;b.undoManager&&b.undoManager.unlock();a.data=c.content}});b.on("mode",function(){b.getCommand("source").setState("source"===b.mode?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF);if("source"===b.mode&&("autoCompleteToggle"in b.commands&&
b.getCommand("autoCompleteToggle").setState(window["codemirror_"+b.id].config.autoCloseTags?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF),b.plugins.textselection&&textRange&&!b.config.fullPage)){var a,c;a=OffSetToLineChannel(window["codemirror_"+b.id],textRange.startOffset);"undefined"==typeof textRange.endOffset?(window["codemirror_"+b.id].focus(),window["codemirror_"+b.id].setCursor(a)):(window["codemirror_"+b.id].focus(),c=OffSetToLineChannel(window["codemirror_"+b.id],textRange.endOffset),window["codemirror_"+
b.id].setSelection(a,c))}});b.on("resize",function(){if(window["editable_"+b.id]&&"source"===b.mode){var a=window["editable_"+b.id].getParent();window["codemirror_"+b.id].setSize(a.$.clientWidth+"px",a.$.clientHeight+"px")}});b.on("readOnly",function(){window["editable_"+b.id]&&"source"===b.mode&&window["codemirror_"+b.id].setOption("readOnly",this.readOnly)});b.on("instanceReady",function(a){a=b.commands.selectAll;null!=a&&(a.exec=function(){if("source"===b.mode)window["codemirror_"+b.id].setSelection({line:0,
ch:0},{line:window["codemirror_"+b.id].lineCount(),ch:0});else{var a=b.editable();if(a.is("body"))b.document.$.execCommand("SelectAll",!1,null);else{var c=b.createRange();c.selectNodeContents(a);c.select()}b.forceNextSelectionCheck();b.selectionChange()}})});if("undefined"!=typeof jQuery&&jQuery('a[data-toggle\x3d"tab"]')&&window["codemirror_"+b.id])jQuery('a[data-toggle\x3d"tab"]').on("shown.bs.tab",function(){window["codemirror_"+b.id].refresh()});b.on("setData",function(a){window["editable_"+a.editor.id]&&
"source"===a.editor.mode&&window["codemirror_"+a.editor.id].setValue(a.data.dataValue)})}});var d=CKEDITOR.tools.createClass({base:CKEDITOR.editable,proto:{setData:function(b){this.setValue(b);window["editable_"+this.editor.id]&&"source"===this.editor.mode&&window["codemirror_"+this.editor.id].setValue(b);this.editor.fire("dataReady")},getData:function(){return this.getValue()},insertHtml:function(){},insertElement:function(){},insertText:function(){},setReadOnly:function(b){this[(b?"set":"remove")+
"Attribute"]("readOnly","readonly")},editorID:null,detach:function(){window["codemirror_"+this.editorID].toTextArea();window["editable_"+this.editorID]=null;window["codemirror_"+this.editorID]=null;d.baseProto.detach.call(this);this.clearCustomData();this.remove()}}})})();
CKEDITOR.plugins.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:!1,readOnly:1,exec:function(d){"wysiwyg"===d.mode&&d.fire("saveSnapshot");d.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED);d.setMode("source"===d.mode?"wysiwyg":"source")},canUndo:!1},searchCode:{modes:{wysiwyg:0,source:1},editorFocus:!1,readOnly:1,exec:function(d){CodeMirror.commands.find(window["codemirror_"+d.id])},canUndo:!0},autoFormat:{modes:{wysiwyg:0,source:1},editorFocus:!1,readOnly:0,exec:function(d){var b=
window["codemirror_"+d.id].getCursor(!0),k=window["codemirror_"+d.id].getCursor(!1);window["codemirror_"+d.id].autoFormatRange(b,k)},canUndo:!0},commentSelectedRange:{modes:{wysiwyg:0,source:1},editorFocus:!1,readOnly:0,exec:function(d){var b=window["codemirror_"+d.id].getCursor(!0),k=window["codemirror_"+d.id].getCursor(!1);window["codemirror_"+d.id].commentRange(!0,b,k)},canUndo:!0},uncommentSelectedRange:{modes:{wysiwyg:0,source:1},editorFocus:!1,readOnly:0,exec:function(d){var b=window["codemirror_"+
d.id].getCursor(!0),k=window["codemirror_"+d.id].getCursor(!1);window["codemirror_"+d.id].commentRange(!1,b,k);window["codemirror_"+d.id].config.autoFormatOnUncomment&&window["codemirror_"+d.id].autoFormatRange(b,k)},canUndo:!0},autoCompleteToggle:{modes:{wysiwyg:0,source:1},editorFocus:!1,readOnly:1,exec:function(d){this.state==CKEDITOR.TRISTATE_ON?window["codemirror_"+d.id].setOption("autoCloseTags",!1):this.state==CKEDITOR.TRISTATE_OFF&&window["codemirror_"+d.id].setOption("autoCloseTags",!0);
this.toggleState()},canUndo:!0}}};function LineChannelToOffSet(d,b){var k=b.line,p=k+b.ch;for(i=0;i<k;i++)p+=d.getLine(i).length;return p}function OffSetToLineChannel(d,b){var k=0,p=0,n=0;for(i=0;i<d.lineCount();i++){len=d.getLine(i).length;if(b<n+len){k=i;p=b-n;break}len++;n+=len}return{line:k,ch:p}}function IsStyleSheetAlreadyLoaded(d){return null!=CKEDITOR.document.getHead().findOne('link[href\x3d"'+d+'"]')};