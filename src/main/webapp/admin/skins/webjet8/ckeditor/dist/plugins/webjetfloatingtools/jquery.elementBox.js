(function(c,C,D,E){function q(a,d){g=this;this.element=c(a);this.settings=c.extend(!0,r,d);this._defaults=r;this._name="elementBox";this.init()}function v(a){var d=["top","right","bottom","left"],b="";c.each(g.settings.elements,function(a,f){var e=f.name,k='\x3cdiv class\x3d"'+e+' box"\x3e';"element"!=e&&c.each(d,function(a,c){c.charAt(0).toUpperCase();c.slice(1);k+='\x3cdiv class\x3d"'+c+'ValueBox valueBox"\x3e';k+='\x3cspan class\x3d"'+c+"Value value "+e+'BoxValue"\x3e0\x3c/span\x3e';k+="\x3c/div\x3e"});
b=k+b+"\x3c/div\x3e"});a.html(b);var h='\x3cdiv class\x3d"legendBox"\x3e',f=g.settings.elements.slice();f.reverse();h+="\x3cul\x3e";c.each(f,function(a,c){var b=c.name;"element"!=b&&(h+='\x3cli class\x3d"'+b+'"\x3e\x3cspan\x3e\x3c/span\x3e'+m(b)+"\x3c/li\x3e")});h+="\x3c/ul\x3e";h+="\x3c/div\x3e";a.append(h)}function x(){var a="";c.each(g.settings.borders,function(c,b){a+='\x3coption value\x3d"'+b+'"\x3e'+m(b)+"\x3c/option\x3e"});return a}function m(a){return l(g.settings.texts[a])?a:g.settings.texts[a]}
function t(){var a=c(".elementBoxInputBox select.borderSelect"),d=c(".elementBoxInputBox .valueInput"),b=c(".elementBoxInputBox .minicolors");"none"==a.val()?(d.val("0").parent().hide(),b.parent().hide()):(d.parent().show(),b.parent().show())}function y(){c("body").data("eventsBound",!0).on("click",".valueBox .value",function(){p();var a=c(this),d=c(".elementBoxInputBox"),b=c(this),h=a.hasClass("borderBoxValue"),f=0;h?(b=b.text(),f=b.split(" "),f={width:l(f[0])?"":f[0],border:l(f[1])?"none":f[1],
color:l(f[2])?"rgba(255, 255, 255, 1)":f[2]},-1!=b.indexOf("rgb")&&(f.color=b.substring(b.indexOf("rgb"))),d.find(".valueInput").val(f.width),d.find(".borderSelect").val(f.border),d.find(".colorInput").minicolors("value",z(f.color))):(f=b.text(),d.find("input.valueInput").val(f));A(a,h);"0"==d.find("input:first").val()&&d.find("input:first").val("");d.find("input:first").focus()});c("body").on("click",".elementBoxInputBox input:submit",B);c("body").on("change",".elementBoxInputBox select.borderSelect",
function(){t()});c("body").on("mouseover","div.box:not(.element)",function(a){a.stopPropagation();c("div.box").removeClass("hover");c(this).addClass("hover");a=c(this).prop("class").split(" ");c.each(a,function(a,b){if("box"==b)return!0;0<c(".legendBox").find("li."+b).length&&c(".legendBox").find("li."+b).addClass("hover")})}).on("mouseout","div.box:not(.element)",function(a){a.stopPropagation();c(this).removeClass("hover");c(".legendBox li.hover").removeClass("hover")});c("body").on("mouseover",
"div.element",function(a){a.stopPropagation();c("div.box").removeClass("hover");c(".legendBox li.hover").removeClass("hover")});c(".elementBoxInputBoxOverlay").click(p)}function A(a,d){var b=c(".elementBoxInputBox"),h=c(".elementBoxInputBoxOverlay");b.data("element",a);b.find(".allInputBox input").prop("checked",!1);c.uniform.update();b.find(".allInputBox").show();d?(b.find(".borderSelectBox").show(),t()):(b.find(".valueInputBox").show(),b.find(".borderSelectBox").hide(),b.find(".colorInputBox").hide());
b.show();h.show();setTimeout(function(){var c=a.offset(),d=a.outerWidth(),h=a.outerHeight(),e=b.outerWidth(),k=b.outerHeight(),c={left:c.left+d/2-e/2,top:c.top+h/2-k/2};0>c.left&&(c.left=0);0>c.top&&(c.top=0);b.css(c)},1)}function z(a){var d;d=(d=a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===d.length?"#"+("0"+parseInt(d[1],10).toString(16)).slice(-2)+("0"+parseInt(d[2],10).toString(16)).slice(-2)+("0"+parseInt(d[3],10).toString(16)).slice(-2):"";a=c.trim(a.replace(/^.*,(.+)\)/,
"$1"));return{color:d,opacity:a}}function p(){var a=c(".elementBoxInputBox"),d=c(".elementBoxInputBoxOverlay");a.data("element",null);a.hide();d.hide()}function B(){var a=c(".elementBoxInputBox"),d=c(this).siblings(".value"),b=0,d=a.data("element");if(null==d)return console.log("element null"),!1;d.hasClass("borderBoxValue")?(b=n(a.find(".valueInput").val()),b+=" ",b+=a.find(".borderSelect").val(),"none"!=a.find(".borderSelect").val()&&(b+=" ",b+=a.find(".colorInput").minicolors("rgbaString"))):b=
n(a.find("input").val());p();c("#allInput").is(":checked")?d.closest(".box").children(".valueBox").find("span").each(function(){var a=c(this);a.attr("title",b);a.text(b);a.show()}):(d.attr("title",b),d.text(b),d.show());return!1}function n(a){if(""==a)return"";if(!isNaN(a))return c.trim(Math.round(a))+"px";if(a.endsWith("%")){var d=c.trim(a.replace("%",""));if(!isNaN(d))return Math.round(d)+"%"}return a.endsWith("px")&&(d=c.trim(a.replace("px","")),!isNaN(d))?Math.round(d)+"px":0}function l(a){return"undefined"==
typeof a?!0:!1}var g,r={texts:{margin:"margin",border:"border",padding:"padding",position:"position",submit:"OK",valueInputLabel:"Width",borderSelectLabel:"Style",colorInputLabel:"Color",allInputLabel:"Set value to all"},dimension:"200px",elements:[{name:"element"},{name:"padding"},{name:"border"},{name:"margin"}],borders:["none","dotted","dashed","solid"]},u={values:function(a){var d=["margin","border","padding"];if(l(a)){var b=[];g.element.each(function(a,f){var w=c(this),g={};c.each(d,function(a,
b){var d=c(w).find("."+b);l(g[b])&&(g[b]={});d.children(".valueBox").each(function(){var a=c.trim(c(this).prop("class").replace(/valueBox/gi,"")),d=c(this).find(".value").text();g[b][a]=d})});b.push(g)});return b}c.each(d,function(b,d){if(l(a[d]))return!0;g.element.find("."+d).children(".valueBox").each(function(){var b=c.trim(c(this).prop("class").replace(/valueBox/gi,"")),h=c(this).find(".value"),e=0;if(!l(a[d][b])){b=a[d][b];if("border"==d)if(l(b)||0==b)b=0;else{e="";if(-1!=b.indexOf("#")){e=c.trim(b.substring(b.indexOf("#")));
b=b.substring(0,b.indexOf("#"));4==e.length&&(e+=e.substring(1));var k;k=e.replace("#","");var e=parseInt(k.substring(0,2),16),g=parseInt(k.substring(2,4),16);k=parseInt(k.substring(4,6),16);e="rgba("+e+","+g+","+k+",1)"}-1!=b.indexOf("rgb")&&(e=c.trim(b.substring(b.indexOf("rgb"))),b=b.substring(0,b.indexOf("rgb")),-1!=e.indexOf("rgb")&&-1==e.indexOf("rgba")&&(e=e.replace(")",", 1)").replace("rgb","rgba")));b=b.split(" ");g=n(b[0]);b=c.trim(g+" "+b[1]+" "+e)}else b=n(b);e=b}h.text(e).prop("title",
e)})})}};c.extend(q.prototype,{init:function(){g.element.addClass("clearfix elementBox");v(this.element);if(null==c("body").data("eventsBound")){var a;a='\x3cdiv class\x3d"elementBoxInputBoxOverlay"\x3e\x3c/div\x3e\x3cdiv class\x3d"elementBoxInputBox"\x3e\x3cform class\x3d"clearfix"\x3e\x3cdiv class\x3d"valueInputBox"\x3e';a+='\x3clabel for\x3d"valueInput"\x3e'+m("valueInputLabel")+"\x3c/label\x3e";a+='\x3cinput type\x3d"text" autocomplete\x3d"off" id\x3d"valueInput" name\x3d"valueInput" class\x3d"form-control valueInput" /\x3e';
a+="\x3c/div\x3e";a+='\x3cdiv class\x3d"borderSelectBox"\x3e';a+='\x3clabel for\x3d"borderSelect"\x3e'+m("borderSelectLabel")+"\x3c/label\x3e";a+='\x3cselect name\x3d"select" id\x3d"borderSelect" class\x3d"form-control borderSelect"\x3e';a+=x();a+="\x3c/select\x3e";a+="\x3c/div\x3e";a+='\x3cdiv class\x3d"colorInputBox"\x3e';a+='\x3clabel for\x3d"colorInput"\x3e'+m("colorInputLabel")+"\x3c/label\x3e";a+='\x3cinput type\x3d"text" autocomplete\x3d"off" name\x3d"colorInput" id\x3d"colorInput" class\x3d"form-control colorInput color-picker" value\x3d"#ffffff" /\x3e';
a+="\x3c/div\x3e";a+='\x3cdiv class\x3d"allInputBox"\x3e';a+='\x3clabel for\x3d"allInput"\x3e'+m("allInputLabel")+"\x3c/label\x3e";a+='\x3cinput type\x3d"checkbox" id\x3d"allInput" name\x3d"allInput" checked\x3d"false" /\x3e';a+="\x3c/div\x3e";a+='\x3cinput type\x3d"submit" class\x3d"btn btn-primary" value\x3d"'+m("submit")+'" /\x3e';a+="\x3c/form\x3e\x3c/div\x3e";c("body").append(a);c(".elementBoxInputBoxOverlay").hide();c(".elementBoxInputBox").hide();y()}}});c.fn.elementBox=function(a,d){if("string"===
typeof arguments[0]){var b=Array.prototype.slice.call(arguments);b.splice(0,1);if("undefined"!=typeof u[arguments[0]]&&(g=this,this.element=c(this),b=u[arguments[0]].apply(this,b),"undefined"!=typeof b))return b}return this.each(function(){c.data(this,"plugin_elementBox")||c.data(this,"plugin_elementBox",new q(this,a))})}})(jQuery,window,document);