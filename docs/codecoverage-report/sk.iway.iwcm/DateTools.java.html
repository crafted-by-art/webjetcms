<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="sk"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>DateTools.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">webjet8v9</a> &gt; <a href="index.source.html" class="el_package">sk.iway.iwcm</a> &gt; <span class="el_source">DateTools.java</span></div><h1>DateTools.java</h1><pre class="source lang-java linenums">package sk.iway.iwcm;

import java.sql.Timestamp;
import java.text.DateFormatSymbols;
import java.util.ArrayList;
import java.util.Calendar;
import java.util.Date;
import java.util.GregorianCalendar;
import java.util.List;
import java.util.Locale;

/**
 * Podporne metody
 *
 * @Title WebJET
 * @Company Interway s.r.o. (www.interway.sk)
 * @Copyright Interway s.r.o. (c) 2001-2002
 * @author $Author: jeeff mkolejak $
 * @version $Revision: 1.6 $
 * @created Date: 15.4.2014 12:41:45
 * @modified $Date: 2004/08/16 06:26:11 $
 */
<span class="nc" id="L23">public class DateTools</span>
{
<span class="nc" id="L25">	private int poradieTyzdnaFrom = 0;</span>
<span class="nc" id="L26">	private int poradieTyzdna = 0;</span>
<span class="nc" id="L27">	private boolean hasRun = false;</span>

	/**
	 * Vrati polnoc, koniec dnesneho dna
	 *
	 * @return calendar
	 */
	public static Calendar getMidnightToday()
	{
<span class="nc" id="L36">		Calendar cal = new GregorianCalendar();</span>
<span class="nc" id="L37">		cal = midnightToday(cal);</span>
<span class="nc" id="L38">		return cal;</span>
	}

	/**
	 * Vrati polnoc, zadaj pocet dni dozadu
	 *
	 * @return calendar
	 */
	public static Calendar getMidnightDaysBefore(int count)
	{
<span class="nc" id="L48">		Calendar cal = new GregorianCalendar();</span>
<span class="nc" id="L49">		cal = midnightDaysBefore(count, cal);</span>
<span class="nc" id="L50">		return cal;</span>
	}

	/**
	 * Vrati polnoc, ktorou den zacinal
	 *
	 * @param date
	 * @return calendar
	 */
	public static Calendar getMidninght(Date date)
	{
<span class="nc" id="L61">		Calendar cal = dateToCalendar(date);</span>
<span class="nc" id="L62">		cal = midnightToday(cal);</span>
<span class="nc" id="L63">		return cal;</span>
	}

	/**
	 * Vrati hodinu vybrateho dna
	 *
	 * @param date
	 * @return calendar
	 */
	public static Calendar getHourOfDay(Date date, int hour)
	{
<span class="nc" id="L74">		Calendar cal = dateToCalendar(date);</span>
<span class="nc" id="L75">		cal = hourOfDay(cal, hour);</span>
<span class="nc" id="L76">		return cal;</span>
	}

	/**
	 * Vrati x hodin pred uvedenym casom
	 *
	 * @param date
	 * @param hour
	 * @return
	 */
	public static Calendar getHoursBefore(Date date, int hour)
	{
<span class="nc" id="L88">		Calendar cal = dateToCalendar(date);</span>
<span class="nc" id="L89">		cal.add(Calendar.HOUR, -hour);</span>
<span class="nc" id="L90">		return cal;</span>
	}

	/**
	 * Vrati polnoc ktora bude dnes
	 *
	 * @param calendar
	 * @return calendar
	 */
	public static Calendar midnightToday(Calendar cal)
	{
<span class="nc" id="L101">		cal = getMidnight(cal);</span>
<span class="nc" id="L102">		cal.add(Calendar.DAY_OF_MONTH, 1);</span>
<span class="nc" id="L103">		return cal;</span>
	}

	/**
	 * Vrati polnoc ktorou vybraty den zacinal
	 *
	 * @param cal
	 * @return
	 */
	private static Calendar getMidnight(Calendar cal)
	{
<span class="nc" id="L114">		cal.set(Calendar.HOUR_OF_DAY, 0);</span>
<span class="nc" id="L115">		cal.set(Calendar.MINUTE, 0);</span>
<span class="nc" id="L116">		cal.set(Calendar.SECOND, 0);</span>
<span class="nc" id="L117">		cal.set(Calendar.MILLISECOND, 0);</span>
<span class="nc" id="L118">		return cal;</span>
	}

	/**
	 * Vrati polnoc ktorou vybraty den zacinal x dni dozadu
	 *
	 * @param calendar
	 * @return calendar
	 */
	public static Calendar midnightDaysBefore(int daysBefore, Calendar cal)
	{
<span class="nc" id="L129">		int days = daysBefore - 1;</span>
<span class="nc" id="L130">		cal = getMidnight(cal);</span>
<span class="nc" id="L131">		cal.add(Calendar.DAY_OF_MONTH, -days);</span>
<span class="nc" id="L132">		return cal;</span>
	}

	/**
	 *
	 * @return
	 */
	public static Calendar getFirstDateOfPreviousMonth()
	{
<span class="nc" id="L141">		Calendar cal = Calendar.getInstance();</span>
<span class="nc" id="L142">		cal.set(Calendar.MONTH, cal.get(Calendar.MONTH) - 1);</span>
<span class="nc" id="L143">		cal = getMidnight(cal);</span>
<span class="nc" id="L144">		cal.set(Calendar.DAY_OF_MONTH, cal.getActualMinimum(Calendar.DAY_OF_MONTH));</span>
<span class="nc" id="L145">		return cal;</span>
	}

	/**
	 *
	 * @return
	 */
	public static Calendar getLastDateOfPreviousMonth()
	{
<span class="nc" id="L154">		Calendar cal = Calendar.getInstance();</span>
<span class="nc" id="L155">		cal.set(Calendar.MONTH, cal.get(Calendar.MONTH) - 1);</span>
<span class="nc" id="L156">		cal = getMidnight(cal);</span>
<span class="nc" id="L157">		cal.set(Calendar.DAY_OF_MONTH, cal.getActualMaximum(Calendar.DAY_OF_MONTH));</span>
<span class="nc" id="L158">		return cal;</span>
	}

	/**
	 *
	 * @return
	 */
	public static Calendar getFirstDateOfCurrentMonth()
	{
<span class="nc" id="L167">		Calendar cal = Calendar.getInstance();</span>
<span class="nc" id="L168">		cal = getMidnight(cal);</span>
<span class="nc" id="L169">		cal.set(Calendar.DAY_OF_MONTH, cal.getActualMinimum(Calendar.DAY_OF_MONTH));</span>
<span class="nc" id="L170">		return cal;</span>
	}

	/**
	 *
	 * @return
	 */
	public static Calendar getLastDateOfCurrentMonth()
	{
<span class="nc" id="L179">		Calendar cal = Calendar.getInstance();</span>
<span class="nc" id="L180">		cal = getMidnight(cal);</span>
<span class="nc" id="L181">		cal.set(Calendar.DAY_OF_MONTH, cal.getActualMaximum(Calendar.DAY_OF_MONTH));</span>
<span class="nc" id="L182">		return cal;</span>
	}

	/**
	 *
	 * @return
	 */
	public static Calendar getFirstDateOfNextMonth()
	{
<span class="nc" id="L191">		Calendar cal = Calendar.getInstance();</span>
<span class="nc" id="L192">		cal.set(Calendar.MONTH, cal.get(Calendar.MONTH) + 1);</span>
<span class="nc" id="L193">		cal = getMidnight(cal);</span>
<span class="nc" id="L194">		cal.set(Calendar.DAY_OF_MONTH, cal.getActualMinimum(Calendar.DAY_OF_MONTH));</span>
<span class="nc" id="L195">		return cal;</span>
	}

	/**
	 *
	 * @return
	 */
	public static Calendar getLastDateOfNextMonth()
	{
<span class="nc" id="L204">		Calendar cal = Calendar.getInstance();</span>
<span class="nc" id="L205">		cal.set(Calendar.MONTH, cal.get(Calendar.MONTH) + 1);</span>
<span class="nc" id="L206">		cal = getMidnight(cal);</span>
<span class="nc" id="L207">		cal.set(Calendar.DAY_OF_MONTH, cal.getActualMaximum(Calendar.DAY_OF_MONTH));</span>
<span class="nc" id="L208">		return cal;</span>
	}

	/**
	 * Vrati hodinu dnesneho dna
	 *
	 * @param calendar
	 * @return calendar
	 */
	public static Calendar hourOfDay(Calendar cal, int hour)
	{
<span class="nc" id="L219">		cal.set(Calendar.HOUR_OF_DAY, hour);</span>
<span class="nc" id="L220">		cal.set(Calendar.MINUTE, 0);</span>
<span class="nc" id="L221">		cal.set(Calendar.SECOND, 0);</span>
<span class="nc" id="L222">		cal.set(Calendar.MILLISECOND, 0);</span>
<span class="nc" id="L223">		return cal;</span>
	}

	/**
	 * Konvertuje java.util.Date do java.util.Calendar
	 *
	 * @param date
	 * @return calendar
	 */
	public static Calendar dateToCalendar(Date date)
	{
<span class="nc" id="L234">		Calendar cal = Calendar.getInstance();</span>
<span class="nc" id="L235">		cal.setTime(date);</span>
<span class="nc" id="L236">		return cal;</span>
	}

	/**
	 * Konvertuje java.sql.Timestamp do java.util.Calendar
	 *
	 * @param timestamp
	 * @return
	 */
	public static Calendar timestampToCalendar(Timestamp timestamp)
	{
<span class="fc" id="L247">		Calendar cal = Calendar.getInstance();</span>
<span class="fc" id="L248">		cal.setTimeInMillis(timestamp.getTime());</span>
<span class="fc" id="L249">		return cal;</span>
	}

	/**
	 * Vrati x dni dopredu, pri zapornom znamienku dni dozadu
	 *
	 * @param calendar
	 * @return calendar
	 */
	public static Calendar getDaysAfter(int daysAfter, Calendar cal)
	{
<span class="nc" id="L260">		cal.add(Calendar.DATE, daysAfter);</span>
<span class="nc" id="L261">		return cal;</span>
	}

	/**
	 * Vrati list dni medzi dateFrom(vcitane) a dateTo(vcitane)
	 *
	 * @param dateFrom
	 * @param dateTo
	 * @return
	 */
	public static List&lt;Date&gt; getDatesBetweenInclude(final Date dateFrom, final Date dateTo)
	{
<span class="nc" id="L273">		List&lt;Date&gt; dates = new ArrayList&lt;Date&gt;();</span>
<span class="nc" id="L274">		Calendar c1 = new GregorianCalendar();</span>
<span class="nc" id="L275">		c1.setTime(dateFrom);</span>
<span class="nc" id="L276">		Calendar c2 = new GregorianCalendar();</span>
<span class="nc" id="L277">		c2.setTime(dateTo);</span>
		//int a = c1.get(Calendar.DATE);
		//int b = c2.get(Calendar.DATE);
<span class="nc" id="L280">		dates.add(dateFrom);</span>
<span class="nc bnc" id="L281" title="All 4 branches missed.">		while ((c1.get(Calendar.YEAR) != c2.get(Calendar.YEAR)) || (c1.get(Calendar.MONTH) != c2.get(Calendar.MONTH))</span>
<span class="nc bnc" id="L282" title="All 2 branches missed.">					|| (c1.get(Calendar.DATE) != c2.get(Calendar.DATE)))</span>
		{
<span class="nc" id="L284">			c1.add(Calendar.DATE, 1);</span>
<span class="nc" id="L285">			dates.add(new Date(c1.getTimeInMillis()));</span>
		}
<span class="nc" id="L287">		return dates;</span>
	}

	/**
	 * Vrati list dni medzi dateFrom(vcitane) a dateTo(vcitane) vystup String
	 *
	 * skratkaDna.dd.MM.yyyy.skratkaMesiaca
	 *
	 * @param dateFrom
	 * @param dateTo
	 * @return
	 */
	public static List&lt;String&gt; getDatesBetweenIncludeString(Date dateFrom, Date dateTo)
	{
<span class="nc" id="L301">		List&lt;Date&gt; datumListDate = DateTools.getDatesBetweenInclude(dateFrom, dateTo);</span>
<span class="nc" id="L302">		List&lt;String&gt; datumListString = new ArrayList&lt;String&gt;();</span>
<span class="nc bnc" id="L303" title="All 2 branches missed.">		for (int i = 0; i &lt; datumListDate.size(); i++)</span>
		{
<span class="nc" id="L305">			Date datum = datumListDate.get(i);</span>
<span class="nc" id="L306">			datumListString.add(getShortDayName(datum, new Locale(&quot;sk&quot;)) + &quot;.&quot; + Tools.formatDate(datum) + &quot;.&quot;</span>
<span class="nc" id="L307">						+ getShortMonthName(datum, new Locale(&quot;sk&quot;)));</span>
		}
<span class="nc" id="L309">		return datumListString;</span>
	}

	/**
	 * Vrati list dni medzi dateFrom(vcitane) a dateTo(vcitane) vystup String
	 *
	 * skratkaDna.dd.MM.yyyy.skratkaMesiaca-poradieDna/poradieTyzdna
	 *
	 * @param dateFrom
	 * @param dateTo
	 * @return
	 */
	public List&lt;String&gt; getDatesBetweenIncludeOrderString(Date dateFrom, Date dateTo)
	{
<span class="nc" id="L323">		List&lt;Date&gt; datumListDate = DateTools.getDatesBetweenInclude(dateFrom, dateTo);</span>
<span class="nc" id="L324">		Calendar calFrom = dateToCalendar(dateFrom);</span>
<span class="nc" id="L325">		poradieTyzdnaFrom = calFrom.get(Calendar.WEEK_OF_YEAR);</span>
<span class="nc" id="L326">		List&lt;String&gt; datumListString = new ArrayList&lt;String&gt;();</span>
<span class="nc bnc" id="L327" title="All 2 branches missed.">		for (int i = 0; i &lt; datumListDate.size(); i++)</span>
		{
<span class="nc" id="L329">			Date datum = datumListDate.get(i);</span>
<span class="nc" id="L330">			String datumSoSkratkami = getShortDayName(datum, new Locale(&quot;sk&quot;)) + &quot;.&quot; + Tools.formatDate(datum) + &quot;.&quot;</span>
<span class="nc" id="L331">						+ getShortMonthName(datum, new Locale(&quot;sk&quot;));</span>
<span class="nc" id="L332">			Calendar cal = dateToCalendar(datum);</span>
<span class="nc" id="L333">			int poradieDnaVTyzdni = cal.get(Calendar.DAY_OF_WEEK);</span>
<span class="nc bnc" id="L334" title="All 2 branches missed.">			if (poradieDnaVTyzdni == 1)</span>
			{
<span class="nc" id="L336">				poradieDnaVTyzdni = 7;</span>
			}
			else
			{
<span class="nc" id="L340">				poradieDnaVTyzdni = poradieDnaVTyzdni - 1;</span>
			}
<span class="nc" id="L342">			System.out.println(&quot;datum: &quot; + datumSoSkratkami + &quot;poradieTyzdna: &quot; + poradieTyzdna);</span>
<span class="nc bnc" id="L343" title="All 4 branches missed.">			if (cal.get(Calendar.WEEK_OF_YEAR) == 1 &amp;&amp; hasRun == false)</span>
			{
<span class="nc" id="L345">				poradieTyzdnaFrom = poradieTyzdna;</span>
<span class="nc" id="L346">				hasRun = true;</span>
			}
<span class="nc bnc" id="L348" title="All 2 branches missed.">			if (hasRun == true)</span>
			{
<span class="nc" id="L350">				poradieTyzdna = cal.get(Calendar.WEEK_OF_YEAR) + poradieTyzdnaFrom + 1;</span>
			}
			else
			{
<span class="nc" id="L354">				poradieTyzdna = cal.get(Calendar.WEEK_OF_YEAR) - poradieTyzdnaFrom + 1;</span>
			}
<span class="nc" id="L356">			System.out.println(&quot;poradieTyzdna: &quot; + poradieTyzdna + &quot; poradieTyzdnaFrom: &quot; + poradieTyzdnaFrom);</span>
<span class="nc" id="L357">			String poradieDnaATyzdna = &quot;&quot; + poradieDnaVTyzdni + &quot;/&quot; + poradieTyzdna;</span>
<span class="nc" id="L358">			datumListString.add(datumSoSkratkami + &quot;-&quot; + poradieDnaATyzdna);</span>
		}
<span class="nc" id="L360">		return datumListString;</span>
	}

	/**
	 * Vrati skratene nazvy mesiacov pre dany Locale
	 *
	 * @param datum
	 * @param locale
	 * @return
	 */
	public static String getShortMonthName(Date datum, Locale locale)
	{
<span class="nc" id="L372">		Calendar c = dateToCalendar(datum);</span>
<span class="nc" id="L373">		int month = c.get(Calendar.MONTH);</span>
<span class="nc" id="L374">		DateFormatSymbols symbols = new DateFormatSymbols(locale);</span>
<span class="nc" id="L375">		String[] monthNames = symbols.getShortMonths();</span>
<span class="nc" id="L376">		return monthNames[month];</span>
	}

	/**
	 * Vrati nazvy mesiacov pre dany Locale
	 *
	 * @param datum
	 * @param locale
	 * @return
	 */
	public static String getMonthName(Date datum, Locale locale)
	{
<span class="nc" id="L388">		Calendar c = dateToCalendar(datum);</span>
<span class="nc" id="L389">		int month = c.get(Calendar.MONTH);</span>
<span class="nc" id="L390">		DateFormatSymbols symbols = new DateFormatSymbols(locale);</span>
<span class="nc" id="L391">		String[] monthNames = symbols.getMonths();</span>
<span class="nc" id="L392">		return monthNames[month - 1];</span>
	}

	/**
	 * Vrati skratene nazvy dni pre dany Locale
	 *
	 * @param day
	 * @param locale
	 * @return
	 */
	public static String getShortDayName(Date datum, Locale locale)
	{
<span class="nc" id="L404">		Calendar c = dateToCalendar(datum);</span>
<span class="nc" id="L405">		int dayOfWeek = c.get(Calendar.DAY_OF_WEEK);</span>
<span class="nc" id="L406">		DateFormatSymbols symbols = new DateFormatSymbols(locale);</span>
<span class="nc" id="L407">		String[] dayNames = symbols.getShortWeekdays();</span>
<span class="nc" id="L408">		return dayNames[dayOfWeek];</span>
	}

	/**
	 * Vrati nazvy dni pre dany Locale
	 *
	 * @param day
	 * @param locale
	 * @return
	 */
	public static String getDayName(Date datum, Locale locale)
	{
<span class="nc" id="L420">		Calendar c = dateToCalendar(datum);</span>
<span class="nc" id="L421">		int dayOfWeek = c.get(Calendar.DAY_OF_WEEK);</span>
<span class="nc" id="L422">		DateFormatSymbols symbols = new DateFormatSymbols(locale);</span>
<span class="nc" id="L423">		String[] dayNames = symbols.getWeekdays();</span>
<span class="nc" id="L424">		return dayNames[dayOfWeek];</span>
	}

	public static String[] getShortDayNames(Locale locale)
	{
<span class="nc" id="L429">		DateFormatSymbols symbols = new DateFormatSymbols(locale);</span>
<span class="nc" id="L430">		String[] dayNames = symbols.getShortWeekdays();</span>
<span class="nc" id="L431">		return dayNames;</span>
	}

	/**
	 * Vrati cas v milisekundach bez sekund a milisekund
	 *
	 * @param timeMillisWithSeconds
	 * @return
	 */
	public long getTimeLongWithoutSeconds(long timeMillisWithSeconds){
<span class="nc" id="L441">		Calendar cal = Calendar.getInstance();</span>
<span class="nc" id="L442">		cal.setTimeInMillis(timeMillisWithSeconds);</span>
<span class="nc" id="L443">		cal.set(Calendar.SECOND, 0);</span>
<span class="nc" id="L444">		cal.set(Calendar.MILLISECOND, 0);</span>
<span class="nc" id="L445">		long timeMillisWithoutSeconds = cal.getTimeInMillis();</span>
<span class="nc" id="L446">		return timeMillisWithoutSeconds;</span>
	}

    /**
     * Odcita dni z datumu
     * @param date
     * @param days
     * @return
     */
	public static Date substractDays(Date date, int days) {
<span class="nc bnc" id="L456" title="All 2 branches missed.">	    if (date == null) {</span>
<span class="nc" id="L457">	        return null;</span>
        }
<span class="nc" id="L459">        Calendar calendar = Calendar.getInstance();</span>
<span class="nc" id="L460">        calendar.setTime(date);</span>
<span class="nc" id="L461">        calendar.add(Calendar.DATE, days * -1);</span>
<span class="nc" id="L462">        return calendar.getTime();</span>
    }

    /**
     * Prida dni k datumu
     * @param date
     * @param days
     * @return
     */
    public static Date addDays(Date date, int days) {
<span class="nc bnc" id="L472" title="All 2 branches missed.">        if (date == null) {</span>
<span class="nc" id="L473">            return null;</span>
        }
<span class="nc" id="L475">        Calendar calendar = Calendar.getInstance();</span>
<span class="nc" id="L476">        calendar.setTime(date);</span>
<span class="nc" id="L477">        calendar.add(Calendar.DATE, days);</span>
<span class="nc" id="L478">        return calendar.getTime();</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>